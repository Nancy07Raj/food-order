<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      #top {
        background-image: url("./food.avif");
      }
      #addlocation {
        position: absolute;
        left: 300px;
        top: 150px;
      }
      input {
        width: 400px;
        height: 40px;
        border-radius: 20px;
        border: 1px solid #ffab4c;
        text-align: justify;
        padding: 0 20px;
      }
      #updateRestaurant {
        position: absolute;
        /* left: 150px; */
        top: 300px;
        width: 100%;
        background-color: blueviolet;
      }
      #updateRestaurant input {
        margin-left: 280px;
      }
      table {
        margin: 20px;
        width: 500px;
      }
    </style>
  </head>
  <body>
    <ul>
      <li><a class="active" href="./index.html">User</a></li>
      <li><a href="#">Admin</a></li>
      <li><a href="./distributor.html">Distributors</a></li>
    </ul>
    <div id="top" style="margin-left: 15%; padding: 1px 16px; height: 100px">
      <div id="details">
        <p>No.of Location :</p>
        <p>No.of Distributors</p>
      </div>
    </div>
    <div
      id="addlocation"
      style="margin-left: 15%; padding: 1px 16px; height: 200px"
    >
      <form id="form-add">
        <input id="addLoc" type="text" placeholder="Add Location" />
        <button id="add-btn" class="btn-dark" type="button">ADD</button>
        <div class="location"></div>
      </form>
    </div>
    <div
      id="updateRestaurant"
      style="margin-left: 15%; padding: 1px 16px; height: 200px"
    >
      <form id="form-search">
        <input id="searchLoc" type="text" placeholder="Search Location" />
        <button id="search-btn" class="btn-dark" type="button">Search</button>
        <table>
          <thead>
            <th>Location</th>
            <th>Restaurant</th>
            <th>Veg</th>
            <th>Non-Veg</th>
            <th>Snack</th>
          </thead>
          <tbody class="tbody"></tbody>
        </table>
      </form>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
      integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script>
      jQuery(function () {
        let loc = $("#addLoc");
        $("#add-btn").click(function () {
          let resDetails = [
            {
              resName: 0,
              veg: 0,
              nonVeg: 0,
              snacks: 0,
            },
          ];
          localStorage.setItem(
            loc.val().toLowerCase(),
            JSON.stringify(resDetails)
          );
          alert("Location Added");
        });
        $("#search-btn").click(function () {
          $(".tbody").html("");
          let searchLoc = $("#searchLoc").val().toLowerCase();
          let lsLocation = JSON.parse(localStorage.getItem(searchLoc));
          for (i = 0; i < lsLocation.length; i++) {
            $(".tbody").append(` <tr>
            <td>${searchLoc}</td>
          <td>${lsLocation[i].resName}</td>
          <td>${lsLocation[i].veg}</td>
          <td>${lsLocation[i].nonVeg}</td>
          <td>${lsLocation[i].snacks}</td>
          <td><button type="button" data-index="${i}" class="btn-dark del">Delete</button></td>
        </tr>`);
            $("#searchLoc").val("");
          }
          $(".del").click(function () {
            let index = $(this).attr("data-index");
            $(this).closest("tr").remove();
            lsLocation.splice(index, 1);
            localStorage.setItem(searchLoc, JSON.stringify(lsLocation));
          });
        });
      });
    </script>
  </body>
</html>
